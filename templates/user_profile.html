{% extends "base.html" %}

{% block title %}Movie Detail - MovieWeb App{% endblock %}

{% block content %}
    <h1>User Profile</h1>

    <h2>Welcome, {{ user.name }}!</h2>

    <!-- Display User Information -->
    <p>User ID: {{ user.user_id }}</p>
    <p>Username: {{ user.name }}</p>
    <img class="bd-placeholder-img img-thumbnail rounded-circle" width="200" height="200" src="{{ url_for('static', filename='images/' ~ user.profile_picture) }}" alt="Profile Picture">

    <!-- Update User Information Form -->
    <form method="POST" enctype="multipart/form-data">
        <h3>Update User Information:</h3>
        <div class="row g-3 align-items-center">
            <div class="col-auto">
                <label for="new_name" class="col-form-label">New Name:</label>
                <input type="text" class="form-control form-control-sm" id="new_name" name="new_name" placeholder="New Name" value="{{ user.name }}" required>
            </div>
            <div class="col-auto">
                <label for="new_password" class="col-form-label">New Password:</label>
                <input type="password" class="form-control form-control-sm" id="new_password" name="new_password" placeholder="New Password">
            </div>
        </div>
        <div class="col-auto">
            <label for="profile_picture" class="col-form-label">Profile Picture:</label>
            <input type="file" class="form-control" id="profile_picture" name="profile_picture">
        </div>
        <br>
        <input type="hidden" name="action" value="update">
        <button type="submit" class="btn btn-primary mb-3">Update Profile</button>
    </form>

    <!-- Delete User Account Form -->
    <form method="post">
        <h3>Delete User Account:</h3>
        <p>Are you sure you want to delete your account? This action cannot be undone.</p>
        <input type="hidden" name="action" value="delete">
        <button type="submit" class="btn btn-danger mb-3" onclick="return confirm('Are you sure you want to delete your account? This action cannot be undone.');">Delete Account</button>
    </form>

    <a class="btn btn-warning text-decoration-none" href="{{ url_for('user_movies', user_id=user.user_id) }}">My Movies</a>
{% endblock %}